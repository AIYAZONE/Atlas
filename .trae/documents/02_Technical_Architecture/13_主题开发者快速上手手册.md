# Atlas 主题开发者快速上手手册

> 本手册旨在帮助开发者快速理解 Atlas 主题开发流程，实现从视觉设计到可配置组件的转化。

## 1. 核心概念回顾

在 Atlas 中，一个**主题 (Theme)** 是一系列 Vue 组件、样式和资产的集合。它通过 **Schema** 定义其可配置性。

- **Component**: 纯 Vue 3 组件（位于 `themes/your-theme/components`）。
- **Schema**: 描述组件字段的 JSON（定义在组件的 `.vue` 文件或配套的 `.json` 中）。
- **Presets**: 组件的预设配置，方便运营快速添加。

---

## 2. 开发环境准备

1. **安装依赖**：
   ```bash
   pnpm install
   ```
2. **启动本地开发预览**：
   ```bash
   pnpm --filter @atlas/builder dev
   ```
3. **创建新主题**：
   在 `themes/` 目录下复制 `template-theme` 并重命名。

---

## 3. 开发一个新组件 (Step-by-Step)

### 第一步：编写 Vue 组件
在 `themes/your-theme/components/HeroBanner.vue`：
```vue
<template>
  <div :style="{ backgroundColor: settings.bgColor }" class="hero-banner">
    <h1>{{ settings.title }}</h1>
    <p>{{ settings.description }}</p>
  </div>
</template>

<script setup>
defineProps({
  settings: Object
})
</script>
```

### 第二步：定义 Schema
在组件同级目录下创建 `HeroBanner.schema.json`（或在 Vue 文件中通过自定义块定义）：
```json
{
  "name": "Hero Banner",
  "tag": "section",
  "settings": [
    {
      "id": "title",
      "type": "text",
      "label": "Heading",
      "default": "Welcome to Atlas"
    },
    {
      "id": "bgColor",
      "type": "color",
      "label": "Background Color",
      "default": "#ffffff"
    }
  ]
}
```

---

## 4. 样式规范

- **Tailwind CSS**: 优先使用 Tailwind 进行布局和基础样式。
- **Design Tokens**: 使用 `themes/your-theme/tokens.css` 中定义的全局变量（如 `--color-primary`）。
- **Scoped CSS**: 组件独有样式必须使用 `<style scoped>`。

---

## 5. 调试与验证

- **Storybook**: 运行 `pnpm --filter @atlas/themes storybook` 在隔离环境中开发组件。
- **Schema Validation**: 确保你的配置默认值符合 `packages/schema` 的定义。

---

## 6. 发布流程

1. **提交代码**：创建 Feature Branch。
2. **Lint 校验**：`pnpm lint`。
3. **版本更新**：修改 `package.json` 中的版本号。
4. **合并 PR**：触发 GitLab CI 自动发布到预览环境。
