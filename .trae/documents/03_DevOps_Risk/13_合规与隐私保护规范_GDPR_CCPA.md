# Atlas 合规与隐私保护规范 (GDPR/CCPA)

> 本文档定义了 Atlas 在处理全球用户数据时的法律合规性要求，重点针对欧盟 GDPR 和加州 CCPA。

## 1. 数据收集与存储原则

### 1.1 最小化原则 (Data Minimization)
- 仅收集实现业务功能所必需的数据。
- 静态发布的 HTML 不应包含任何明文的用户敏感信息。

### 1.2 存储加密
- 所有持久化在 PostgreSQL 中的用户相关数据必须进行 AES-256 加密。
- 审计日志中严禁记录用户的明文 Email、手机号或完整 IP 地址（应进行掩码处理）。

---

## 2. 用户权利实现 (User Rights)

### 2.1 知情权与同意 (Consent Management)
- **Cookie Banner**: 每个站点必须装配 `cookie-consent` 能力包。
- **动态阻塞**: 在用户点击“同意”前，严禁加载任何第三方追踪脚本（如 GA4, FB Pixel）。

### 2.2 访问权与被遗忘权 (Right to be Forgotten)
- **数据导出**: Java API 需提供接口，支持一键导出该用户在 Atlas 体系内的所有个人数据。
- **物理删除**: 当接收到删除请求时，系统需在 30 天内从 DB 和备份中彻底抹除相关记录。

---

## 3. 区域合规与隔离

### 3.1 数据驻留 (Data Residency)
- 欧盟用户数据应优先存储在 AWS 欧洲区域（如 `eu-central-1`）。
- 通过 `Site` 配置中的 `region` 字段，动态选择存储 Bucket 和数据库实例。

### 3.2 隐私政策动态更新
- 主题层需支持在 Footer 自动关联当前站点的隐私政策版本。

---

## 4. 审计与响应

### 4.1 隐私影响评估 (DPIA)
- 任何涉及用户数据处理的新功能（如插件、新集成层）必须通过合规性评估。

### 4.2 泄露告警
- 建立自动化监控，当发现异常的大批量数据导出行为时，立即触发报警并阻断 API。
